{"remainingRequest":"/Users/nilanshnetan/Desktop/NYU-Spring21/Cloud/FinalProject/final-project-cloud-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nilanshnetan/Desktop/NYU-Spring21/Cloud/FinalProject/final-project-cloud-vue/src/views/AccountPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nilanshnetan/Desktop/NYU-Spring21/Cloud/FinalProject/final-project-cloud-vue/src/views/AccountPage.vue","mtime":1620337451795},{"path":"/Users/nilanshnetan/Desktop/NYU-Spring21/Cloud/FinalProject/final-project-cloud-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nilanshnetan/Desktop/NYU-Spring21/Cloud/FinalProject/final-project-cloud-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/nilanshnetan/Desktop/NYU-Spring21/Cloud/FinalProject/final-project-cloud-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nilanshnetan/Desktop/NYU-Spring21/Cloud/FinalProject/final-project-cloud-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNdWx0aXNlbGVjdCBmcm9tICJ2dWUtbXVsdGlzZWxlY3QiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgeyBBdXRoIH0gZnJvbSAiYXdzLWFtcGxpZnkiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CnZhciBjb25maWcgPSByZXF1aXJlKCIuLi9jb25maWcuanMiKTsKCgpleHBvcnQgZGVmYXVsdCB7CiAgCiAgY29tcG9uZW50czogeyBNdWx0aXNlbGVjdCB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwYXlsb2FkOnt9LAogICAgICBpc0VkaXRpbmc6IGZhbHNlLAogICAgICBzZWxlY3RlZDogbnVsbCwKICAgICAgb3B0aW9uczogWyJBY3Rpb24iLCAiQ29tZWR5IiwgIlRocmlsbGVyIiwgIkhvcnJvciIsICJEcmFtYSJdLAogICAgfTsKICB9LAogIG1vdW50ZWQoKXsKICAgICAgdGhpcy5sb2FkKCk7IAogICAgfSwKICBtZXRob2RzOiB7CiAgICBzYXZlKCkgewogICAgICBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoLnVzZXIpOwogICAgICB0aGlzLnBheWxvYWQgPSB7CiAgICAgICAgICAnZ2VucmUnOiB0aGlzLnNlbGVjdGVkLAogICAgICAgICAgJ3VzZXJpZCc6IHRoaXMuJHN0b3JlLnN0YXRlLmF1dGgudXNlci51c2VybmFtZSwKICAgICAgICB9OwogICAgICB0aGlzLmlzRWRpdGluZyA9ICF0aGlzLmlzRWRpdGluZzsKICAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJQT1NUIiwKICAgICAgICB1cmw6IGNvbmZpZy5hcGkuaW52b2tlVXJsICsgIi9hY2NvdW50L3VwZGF0ZSIsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiB0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoLnRva2VuLAogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0sCiAgICAgICAgZGF0YTogdGhpcy5wYXlsb2FkfSkgCiAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIC8vIGhhbmRsZSBzdWNjZXNzCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZVsnZGF0YSddKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIC8vIGhhbmRsZSBlcnJvcgogICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3I6ICIsIGVycm9yKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBsb2FkKCkgewogICAgICBhd2FpdCAoQXV0aC5jdXJyZW50U2Vzc2lvbigpKS50aGVuKGRhdGEgPT4KICAgICAgYXhpb3MoewogICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgdXJsOiBjb25maWcuYXBpLmludm9rZVVybCArICIvYWNjb3VudCIsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogZGF0YS5pZFRva2VuLmp3dFRva2VuLAogICAgICAgIH0sCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICB1c2VyaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLmF1dGgudXNlci51c2VybmFtZQogICAgICAgIH0gLAogICAgICB9KQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgLy8gaGFuZGxlIHN1Y2Nlc3MKICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSByZXNwb25zZVsnZGF0YSddOwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RlZCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAvLyBoYW5kbGUgZXJyb3IKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yOiAiLCBlcnJvcik7CiAgICAgICAgfSksCiAgICAgICk7CiAgICB9LAogfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7CiAgICAgIHVzZXI6ICJhdXRoL3VzZXIiLAogICAgfSksCiAgfSwKfTsK"},{"version":3,"sources":["AccountPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AccountPage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <aside class=\"col-sm-5\" style=\"margin: auto\">\n        <div class=\"card\">\n          <article class=\"card-body\">\n            <h4 class=\"card-title text-center mb-4 mt-1\">Preference</h4>\n\n            <div v-if=\"!isEditing\" style=\"display: flex\">\n              <div style=\"margin-right:10px\">Genre(s):</div>\n\n              <p style=\"margin-right:5px\" v-for=\"item in selected\" :key=\"item\">\n                {{ item }};\n              </p>\n            </div>\n            <div v-if=\"isEditing\" style=\"display: flex\">\n              <div style=\"margin-right:10px\">Genre(s):</div>\n              <multiselect\n                id=\"sel\"\n                v-model=\"selected\"\n                :multiple=\"true\"\n                :options=\"options\"\n              >\n              </multiselect>\n            </div>\n            <b-card-footer>\n              <button\n                class=\"btn btn-primary\"\n                @click=\"isEditing = !isEditing\"\n                v-if=\"!isEditing\"\n              >\n                Edit\n              </button>\n              <button\n                class=\"btn btn-primary\"\n                @click=\"save\"\n                v-else-if=\"isEditing\"\n              >\n                Save\n              </button>\n\n              <button\n                class=\"btn btn-primary\"\n                style=\"margin-left: 10px\"\n                v-if=\"isEditing\"\n                @click=\"isEditing = false\"\n              >\n                Cancel\n              </button>\n            </b-card-footer>\n          </article>\n        </div>\n      </aside>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Multiselect from \"vue-multiselect\";\nimport axios from \"axios\";\nimport { Auth } from \"aws-amplify\";\nimport { mapGetters } from \"vuex\";\nvar config = require(\"../config.js\");\n\n\nexport default {\n  \n  components: { Multiselect },\n  data() {\n    return {\n      payload:{},\n      isEditing: false,\n      selected: null,\n      options: [\"Action\", \"Comedy\", \"Thriller\", \"Horror\", \"Drama\"],\n    };\n  },\n  mounted(){\n      this.load(); \n    },\n  methods: {\n    save() {\n      console.log(this.$store.state.auth.user);\n      this.payload = {\n          'genre': this.selected,\n          'userid': this.$store.state.auth.user.username,\n        };\n      this.isEditing = !this.isEditing;\n       axios({\n        method: \"POST\",\n        url: config.api.invokeUrl + \"/account/update\",\n        headers: {\n          'Authorization': this.$store.state.auth.token,\n          'Content-Type': 'application/json'\n        },\n        data: this.payload}) \n       .then((response) => {\n          // handle success\n          console.log(response['data']);\n        })\n        .catch(function (error) {\n          // handle error\n          console.error(\"Error: \", error);\n        });\n    },\n    async load() {\n      await (Auth.currentSession()).then(data =>\n      axios({\n        method: \"GET\",\n        url: config.api.invokeUrl + \"/account\",\n        headers: {\n          Authorization: data.idToken.jwtToken,\n        },\n        params: {\n          userid: this.$store.state.auth.user.username\n        } ,\n      })\n        .then((response) => {\n          // handle success\n          this.selected = response['data'];\n          console.log(this.selected);\n        })\n        .catch(function (error) {\n          // handle error\n          console.error(\"Error: \", error);\n        }),\n      );\n    },\n },\n  computed: {\n    ...mapGetters({\n      user: \"auth/user\",\n    }),\n  },\n};\n</script>\n\n     \n<style src=\"vue-multiselect/dist/vue-multiselect.min.css\">\n</style>\n<style lang=\"scss\" scoped>\n.card {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  min-width: 0;\n  word-wrap: break-word;\n  background-color: black;\n  background-clip: border-box;\n  border: 1px solid white;\n  border-radius: 0.25rem;\n}\n</style>"]}]}